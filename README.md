<!--
 Copyright (c) 2021 Brandon Zimmerman
 
 This software is released under the MIT License.
 https://opensource.org/licenses/MIT
-->

# üß© Matic

üö® **WARNING**: **Matic plugins are not sandboxed!** Only run plugins which you've written yourself or received and reviewed from a trusted source!üö®

Matic is an Elixir plugin loader which allows you to write custom plugins (small, self-contained, CLI-oriented apps) in the Elixir language and run them from anywhere on the commandline.

I am _sick_ of trying to recall how to write scripts, aliases, and functions in a language as awkward and unwieldy as `bash`. Googling is always an inevitability and poring over endless stackoverflow pages and esoteric documentation from the golden age of Unix programming is assured. All I want is to be a poweruser of my computer, not to learn _yet another language_. Elixir, with its focus on developer happiness and productivity, seemed like a natural solution to the problem.

## üîå Plugins

The following is a list of community-approved plugins:

[TBW]

## ‚úèÔ∏è Writing a plugin

Writing a matic plugin is as easy as writing a module:

```elixir
defmodule Matic.Plugin.Hello do
  use Matic.Plugin

  version "1.0.0"

  description "Commandline greeter"

  help """
  Usage: hello <name> [names...]

  hello is a tool used for greeting a person specified by <name>.

  Example:

      $ matic hello world
      Hello, world.
  """

  @impl Plugin
  def run(_cwd, args) do
    greetee = Enum.join(args, " ")
    IO.puts("Hello, #{greetee}.")
  end
end
```

‚Ä¶and saving it under `~/.matic/plugins/hello.exs`. Your plugin is provided the current working directory and the given arguments.

## ‚ö°Ô∏è Running a plugin

Running a plugin is as simple as typing:

```bash
$ matic hello world
Hello, world.
```

## üéÅ Cool features

Plugins are managed by matic and so automatically inherit a few features, like the ability to run `help` and `version` subcommands on the plugin:

```bash
$ matic help hello
matic hello - Commandline greeter [version 1.0.0]

Usage: hello <name> [names...]

hello is a tool used for greeting a person specified by <name>.

Example:

  $ matic hello world
  Hello, world.
```

The plugin listing is also automatically generated by the `matic list` command:

```bash
$ matic list
hello   # Commandline greeter [1.0.0]
...
```

## üõ† Installation (quick method)

This Elixir `escript` can be installed from anywhere on the commandline using `mix`:

```bash
$ mix escript.install github zimmydev/matic
...
```

You can uninstall matic from anywhere using `mix` again:

```bash
$ mix escript.uninstall matic
$
```

## üõ† Installation (from mix project)

This Elixir `escript` can be installed in the following way from the root mix project directory:

```bash
$ MIX_ENV=prod mix install
...
```

Afterwards, `matic` will be built and installed to the `~/.mix/escripts` directory. Make sure to add this to your `PATH` so that it can be accessed globally. Running `matic` will create the `~/.matic` directory structure if it does not already exist and present the user with some helpful options if run optionless or with the `help` subcommand. Plugins can be added to `~/.matic/plugins` and will be discovered automatically.

You can uninstall matic at any time from the root mix project directory:

```bash
$ mix uninstall
...
```

## ‚ùì FAQ

### What is a plugin?

A plugin is anything you want it to be! You could write a plugin that moves batches of files, or a plugin which fetches and displays the weather from a remote weather API. You have the power of Elixir at your fingertips!

### Can't I just write an Elixir script?

You absolutely can! Scripts are extremely useful and matic doesn't provide you with any exclusive magical encantations. The problem with scripts is that they can be unweildy to use long-term. In general, they are to be executed inside of their parent directory; executing them outside changes the working directory and thus subtly alters the context, which probably needs to be accounted for in the script. Locating and running a generic script from anywhere you might happen to be can be tricky unless you've done a little planning upfront.

Matic automatically provides plugins with the _current working directory_ and _argument vector_ and gives them a home, leaving you to worry about implementing the more important bits.

Additionally, scripts don't provide any out-of-the-box goodies that matic provides!

Said very succintly: _A matic plugin is a measured compromise between a script and fully-featured commandline app._

## Changelog

View the [changelog](CHANGELOG.md).
